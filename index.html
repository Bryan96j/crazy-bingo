<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-fullscreen">
    <meta name="theme-color" content="#1e3a5f">
    <title>Bingo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
            color: #fff;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            position: fixed;
        }

        /* Pantalla de Bienvenida */
        #welcomeScreen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            text-align: center;
            padding: 20px;
        }

        #welcomeScreen h1 {
            font-size: clamp(2rem, 8vw, 6rem);
            margin-bottom: 3vh;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .btn-primary {
            background: #4CAF50;
            color: white;
            border: none;
            padding: clamp(15px, 3vh, 30px) clamp(30px, 6vw, 60px);
            font-size: clamp(1.2rem, 3vw, 2.5rem);
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: transform 0.2s;
            font-weight: bold;
        }

        .btn-primary:active {
            transform: scale(0.95);
        }

        /* Pantalla Principal */
        #mainScreen {
            display: none;
            height: 100vh;
            width: 100vw;
            flex-direction: row;
        }

        #leftPanel {
            width: 25%;
            background: #2c5282;
            display: flex;
            flex-direction: column;
            padding: 1vh;
            gap: 1vh;
        }

        #currentNumber {
            flex: 0 0 25%;
            background: #fff;
            color: #1e3a5f;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(3rem, 12vh, 8rem);
            font-weight: bold;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        #keyboard {
            flex: 0 0 50%;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1vh;
        }

        .key {
            background: #4a90e2;
            border: none;
            border-radius: 8px;
            font-size: clamp(1.5rem, 4vh, 3rem);
            font-weight: bold;
            color: white;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }

        .key:active {
            transform: scale(0.95);
            background: #357abd;
        }

        .key.wide {
            grid-column: span 2;
        }

        .key.accept {
            background: #4CAF50;
        }

        .key.accept:active {
            background: #45a049;
        }

        .key.delete {
            background: #f44336;
        }

        .key.delete:active {
            background: #da190b;
        }

        #controls {
            flex: 0 0 20%;
            display: flex;
            flex-direction: column;
            gap: 1vh;
        }

        .btn-control {
            flex: 1;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: clamp(1rem, 2.5vh, 2rem);
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }

        .btn-control:active {
            transform: scale(0.95);
        }

        .btn-control.reset {
            background: #ff9800;
        }

        .btn-control.menu {
            background: #9e9e9e;
        }

        #rightPanel {
            width: 75%;
            background: #1e3a5f;
            padding: 1vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #board {
            display: grid;
            gap: 0.5vh;
            width: 100%;
            height: 100%;
            padding: 1vh;
        }

        .number-cell {
            background: #fff;
            color: #1e3a5f;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(1rem, 3vh, 3rem);
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .number-cell.selected {
            background: #4CAF50;
            color: white;
            transform: scale(0.95);
        }

        /* Modal personalizado */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
            padding: clamp(20px, 4vh, 40px);
            border-radius: 15px;
            text-align: center;
            min-width: 60vw;
            max-width: 80vw;
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
        }

        .modal-content h2 {
            font-size: clamp(1.5rem, 4vh, 3rem);
            margin-bottom: 2vh;
        }

        .modal-content p {
            font-size: clamp(1.2rem, 3vh, 2rem);
            margin-bottom: 3vh;
        }

        .modal-buttons {
            display: flex;
            gap: 2vw;
            justify-content: center;
            flex-wrap: wrap;
        }

        .modal-btn {
            padding: clamp(10px, 2vh, 20px) clamp(20px, 4vw, 40px);
            font-size: clamp(1rem, 2.5vh, 2rem);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            min-width: 120px;
        }

        .modal-btn.confirm {
            background: #4CAF50;
            color: white;
        }

        .modal-btn.cancel {
            background: #f44336;
            color: white;
        }

        .modal-btn.neutral {
            background: #2196F3;
            color: white;
        }

        .number-options {
            display: flex;
            gap: 2vw;
            justify-content: center;
            flex-wrap: wrap;
            margin: 3vh 0;
        }

        .number-option {
            padding: clamp(15px, 3vh, 25px) clamp(25px, 5vw, 40px);
            font-size: clamp(1.5rem, 3.5vh, 2.5rem);
            background: #4a90e2;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
            min-width: 100px;
        }

        .number-option:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <!-- Pantalla de Bienvenida -->
    <div id="welcomeScreen">
        <h1>üéâ BINGO üéâ</h1>
        <button class="btn-primary" onclick="showNumberSelection()">INGRESAR</button>
    </div>

    <!-- Pantalla Principal -->
    <div id="mainScreen">
        <!-- Panel Izquierdo (25%) -->
        <div id="leftPanel">
            <div id="currentNumber">-</div>
            <div id="keyboard">
                <button class="key" onclick="addDigit('1')">1</button>
                <button class="key" onclick="addDigit('2')">2</button>
                <button class="key" onclick="addDigit('3')">3</button>
                <button class="key" onclick="addDigit('4')">4</button>
                <button class="key" onclick="addDigit('5')">5</button>
                <button class="key" onclick="addDigit('6')">6</button>
                <button class="key" onclick="addDigit('7')">7</button>
                <button class="key" onclick="addDigit('8')">8</button>
                <button class="key" onclick="addDigit('9')">9</button>
                <button class="key delete" onclick="deleteDigit()">‚Üê</button>
                <button class="key" onclick="addDigit('0')">0</button>
                <button class="key accept" onclick="acceptNumber()">‚úì</button>
            </div>
            <div id="controls">
                <button class="btn-control" onclick="showBingoAlert()">üèÜ BINGO</button>
                <button class="btn-control reset" onclick="showResetConfirm()">üîÑ REINICIAR</button>
                <button class="btn-control menu" onclick="showMenuConfirm()">üè† MEN√ö</button>
            </div>
        </div>

        <!-- Panel Derecho (75%) -->
        <div id="rightPanel">
            <div id="board"></div>
        </div>
    </div>

    <!-- Modal personalizado -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle"></h2>
            <p id="modalMessage"></p>
            <div id="modalButtons" class="modal-buttons"></div>
        </div>
    </div>

    <script>
        let currentInput = '';
        let maxNumbers = 0;
        let selectedNumbers = new Set();

        function showModal(title, message, buttons) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalButtons = document.getElementById('modalButtons');

            modalTitle.textContent = title;
            modalMessage.textContent = message;
            modalButtons.innerHTML = '';

            buttons.forEach(btn => {
                const button = document.createElement('button');
                button.className = `modal-btn ${btn.class}`;
                button.textContent = btn.text;
                button.onclick = btn.action;
                modalButtons.appendChild(button);
            });

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function showNumberSelection() {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalButtons = document.getElementById('modalButtons');

            modalTitle.textContent = 'SELECCI√ìN DE BINGO';
            modalMessage.textContent = 'Seleccione la cantidad de n√∫meros para jugar:';
            modalButtons.innerHTML = '';
            
            const options = [30, 75, 80, 90, 100];
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'number-options';
            
            options.forEach(num => {
                const btn = document.createElement('button');
                btn.className = 'number-option';
                btn.textContent = num;
                btn.onclick = () => startGame(num);
                optionsDiv.appendChild(btn);
            });
            
            modalButtons.appendChild(optionsDiv);
            modal.style.display = 'flex';
        }

        function startGame(numbers) {
            maxNumbers = numbers;
            closeModal();
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('mainScreen').style.display = 'flex';
            createBoard();
        }

        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            selectedNumbers.clear();

            const cols = maxNumbers <= 30 ? 6 : maxNumbers <= 75 ? 10 : maxNumbers <= 90 ? 10 : 10;
            const rows = Math.ceil(maxNumbers / cols);
            
            board.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            board.style.gridTemplateRows = `repeat(${rows}, 1fr)`;

            for (let i = 1; i <= maxNumbers; i++) {
                const cell = document.createElement('div');
                cell.className = 'number-cell';
                cell.textContent = i;
                cell.dataset.number = i;
                cell.onclick = () => toggleNumber(i);
                board.appendChild(cell);
            }
        }

        function addDigit(digit) {
            if (currentInput.length < 3) {
                currentInput += digit;
                document.getElementById('currentNumber').textContent = currentInput || '-';
            }
        }

        function deleteDigit() {
            currentInput = currentInput.slice(0, -1);
            document.getElementById('currentNumber').textContent = currentInput || '-';
        }

        function acceptNumber() {
            const number = parseInt(currentInput);
            
            if (!currentInput) {
                showModal('ERROR', 'Por favor ingrese un n√∫mero', [
                    { text: 'OK', class: 'confirm', action: closeModal }
                ]);
                return;
            }

            if (number < 1 || number > maxNumbers) {
                showModal('ERROR', `El n√∫mero debe estar entre 1 y ${maxNumbers}`, [
                    { text: 'OK', class: 'confirm', action: closeModal }
                ]);
                currentInput = '';
                document.getElementById('currentNumber').textContent = '-';
                return;
            }

            if (selectedNumbers.has(number)) {
                showModal('AVISO', `El n√∫mero ${number} ya fue seleccionado`, [
                    { text: 'OK', class: 'neutral', action: closeModal }
                ]);
                return;
            }

            selectedNumbers.add(number);
            const cell = document.querySelector(`[data-number="${number}"]`);
            if (cell) {
                cell.classList.add('selected');
            }
            
            currentInput = '';
        }

        function toggleNumber(number) {
            if (selectedNumbers.has(number)) {
                showModal('CONFIRMACI√ìN', `¬øDesea eliminar el n√∫mero ${number}?`, [
                    { text: 'S√ç', class: 'confirm', action: () => {
                        selectedNumbers.delete(number);
                        const cell = document.querySelector(`[data-number="${number}"]`);
                        if (cell) {
                            cell.classList.remove('selected');
                        }
                        closeModal();
                    }},
                    { text: 'NO', class: 'cancel', action: closeModal }
                ]);
            }
        }

        function showBingoAlert() {
            showModal('üéâ ¬°BINGO! üéâ', '¬°FELICITACIONES! ¬°Alguien ha ganado el BINGO!', [
                { text: 'REINICIAR', class: 'confirm', action: () => {
                    resetGame();
                    closeModal();
                }},
                { text: 'CANCELAR', class: 'cancel', action: closeModal }
            ]);
        }

        function showResetConfirm() {
            showModal('CONFIRMACI√ìN', '¬øEst√° seguro que desea reiniciar el juego?', [
                { text: 'S√ç', class: 'confirm', action: () => {
                    resetGame();
                    closeModal();
                }},
                { text: 'NO', class: 'cancel', action: closeModal }
            ]);
        }

        function showMenuConfirm() {
            showModal('CONFIRMACI√ìN', '¬øDesea regresar al men√∫ principal?', [
                { text: 'S√ç', class: 'confirm', action: () => {
                    closeModal();
                    document.getElementById('mainScreen').style.display = 'none';
                    document.getElementById('welcomeScreen').style.display = 'flex';
                    currentInput = '';
                    document.getElementById('currentNumber').textContent = '-';
                }},
                { text: 'NO', class: 'cancel', action: closeModal }
            ]);
        }

        function resetGame() {
            selectedNumbers.clear();
            currentInput = '';
            document.getElementById('currentNumber').textContent = '-';
            const cells = document.querySelectorAll('.number-cell');
            cells.forEach(cell => cell.classList.remove('selected'));
        }

        // Prevenir zoom con gestos
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });

        document.addEventListener('gesturechange', function(e) {
            e.preventDefault();
        });

        document.addEventListener('gestureend', function(e) {
            e.preventDefault();
        });

        // Forzar orientaci√≥n horizontal al cargar
        if (window.screen && window.screen.orientation) {
            window.screen.orientation.lock('landscape').catch(() => {});
        }
    </script>
</body>
</html>
