<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-fullscreen">
    <meta name="theme-color" content="#667eea">
    <title>Bingo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }

        body {
            font-family: 'Arial Black', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
            position: fixed;
        }

        /* Pantalla de Bienvenida */
        #welcomeScreen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            text-align: center;
            padding: 20px;
        }

        #welcomeScreen h1 {
            font-size: clamp(3rem, 10vw, 7rem);
            margin-bottom: 3vh;
            text-shadow: 3px 3px 0 #764ba2;
            letter-spacing: 5px;
            color: white;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: clamp(15px, 3vh, 30px) clamp(30px, 6vw, 60px);
            font-size: clamp(1.2rem, 3vw, 2.5rem);
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        /* Pantalla Principal */
        #mainScreen {
            display: none;
            height: 100vh;
            width: 100vw;
            flex-direction: row;
        }

        #leftPanel {
            width: 25%;
            background: rgba(118, 75, 162, 0.3);
            display: flex;
            flex-direction: column;
            padding: 1vh;
            gap: 1vh;
        }

        #currentNumber {
            flex: 0 0 40%;
            background: white;
            color: #667eea;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(7rem, 24vh, 16rem);
            font-weight: bold;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        #keyboard {
            flex: 0 0 35%;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1vh;
        }

        .key {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 10px;
            font-size: clamp(1.5rem, 4vh, 3rem);
            font-weight: bold;
            color: white;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .key:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .key:active {
            transform: translateY(-1px);
        }

        .key.wide {
            grid-column: span 2;
        }

        .key.accept {
            background: linear-gradient(135deg, #654caf 0%, #5c3ebc 100%);
        }

        .key.delete {
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
        }

        #controls {
            flex: 0 0 20%;
            display: flex;
            flex-direction: column;
            gap: 1vh;
        }

        .btn-control {
            flex: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: clamp(1rem, 2.5vh, 2rem);
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-control:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .btn-control:active {
            transform: translateY(-1px);
        }

        .btn-control.reset {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .btn-control.menu {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Bot√≥n GIRAR para modo tradicional */
        #spinButton {
            flex: 0 0 40%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: clamp(2rem, 6vh, 4rem);
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            display: none;
            align-items: center;
            justify-content: center;
        }

        #spinButton:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(76, 175, 80, 0.6);
        }

        #spinButton:active {
            transform: translateY(-1px);
        }

        #rightPanel {
            width: 75%;
            background: rgba(118, 75, 162, 0.2);
            padding: 1vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #board {
            display: grid;
            gap: 0.5vh;
            width: 100%;
            height: 100%;
            padding: 1vh;
            background: rgba(240, 240, 240, 0.1);
            border-radius: 15px;
        }

        .number-cell {
            background: white;
            color: #667eea;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(1rem, 6vh, 3rem);
            font-weight: bold;
            border-radius: 10px;
            border: 3px solid #667eea;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .number-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.5);
        }

        .number-cell.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #764ba2;
        }

        /* Modal personalizado */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: clamp(20px, 4vh, 40px);
            border-radius: 20px;
            text-align: center;
            min-width: 60vw;
            max-width: 80vw;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        }

        .modal-content h2 {
            font-size: clamp(1.5rem, 4vh, 3rem);
            margin-bottom: 2vh;
            color: #667eea;
            text-shadow: 2px 2px 0 #764ba2;
        }

        .modal-content p {
            font-size: clamp(1.2rem, 3vh, 2rem);
            margin-bottom: 3vh;
            color: #764ba2;
        }

        .modal-buttons {
            display: flex;
            gap: 2vw;
            justify-content: center;
            flex-wrap: wrap;
        }

        .modal-btn {
            padding: clamp(10px, 2vh, 20px) clamp(20px, 4vw, 40px);
            font-size: clamp(1rem, 2.5vh, 2rem);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            min-width: 120px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .modal-btn:active {
            transform: translateY(-1px);
        }

        .modal-btn.confirm {
            background: linear-gradient(1135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .modal-btn.cancel {
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .modal-btn.neutral {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .number-options {
            display: flex;
            gap: 2vw;
            justify-content: center;
            flex-wrap: wrap;
            margin: 3vh 0;
        }

        .number-option {
            padding: clamp(15px, 3vh, 25px) clamp(25px, 5vw, 40px);
            font-size: clamp(1.5rem, 3.5vh, 2.5rem);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            min-width: 100px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .number-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .number-option:active {
            transform: translateY(-1px);
        }

        /* Modal de Giro - Esfera */
        .spin-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            justify-content: center;
            align-items: center;
            z-index: 2000;
            flex-direction: column;
        }

        .spin-sphere {
            width: clamp(250px, 50vh, 500px);
            height: clamp(250px, 50vh, 500px);
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fff, #667eea, #764ba2);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 50px rgba(102, 126, 234, 0.8),
                        inset 0 0 50px rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .spin-sphere::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 10%;
            width: 30%;
            height: 30%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.8), transparent);
            filter: blur(10px);
        }

        .spin-number {
            font-size: clamp(6rem, 50vh, 14rem);
            font-weight: bold;
            color: white;
            text-shadow: 0 0 20px rgba(0,0,0,0.5);
            z-index: 1;
        }

        .spinning {
            animation: spin 0.1s linear infinite;
        }

        @keyframes spin {
            from { content: ''; }
            to { content: ''; }
        }

        .spin-accept-btn {
            margin-top: 3vh;
            padding: clamp(15px, 3vh, 25px) clamp(40px, 8vw, 80px);
            font-size: clamp(1.5rem, 3vh, 2.5rem);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(140, 109, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .spin-accept-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(140, 109, 234, 0.4);
        }

        .spin-accept-btn:active {
            transform: translateY(-1px);
        }

        .mode-selection {
            display: flex;
            flex-direction: column;
            gap: 3vh;
            margin: 3vh 0;
        }

        .mode-btn {
            padding: clamp(20px, 4vh, 35px) clamp(30px, 6vw, 50px);
            font-size: clamp(1.3rem, 3vh, 2.2rem);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            min-width: 250px;
        }

        .mode-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .mode-btn:active {
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <!-- Pantalla de Bienvenida -->
    <div id="welcomeScreen">
        <h1>üéâ BINGO üéâ</h1>
        <button class="btn-primary" onclick="showNumberSelection()">INGRESAR</button>
    </div>

    <!-- Pantalla Principal -->
    <div id="mainScreen">
        <!-- Panel Izquierdo (25%) -->
        <div id="leftPanel">
            <!-- N√∫mero actual -->
            <div id="currentNumber">-</div>
            
            <!-- Bot√≥n GIRAR (solo para modo tradicional) -->
            <button id="spinButton" onclick="spinNumber()">üé≤ GIRAR</button>
            
            <!-- Teclado (solo para modo digital) -->
            <div id="keyboard">
                <button class="key" onclick="addDigit('1')">1</button>
                <button class="key" onclick="addDigit('2')">2</button>
                <button class="key" onclick="addDigit('3')">3</button>
                <button class="key" onclick="addDigit('4')">4</button>
                <button class="key" onclick="addDigit('5')">5</button>
                <button class="key" onclick="addDigit('6')">6</button>
                <button class="key" onclick="addDigit('7')">7</button>
                <button class="key" onclick="addDigit('8')">8</button>
                <button class="key" onclick="addDigit('9')">9</button>
                <button class="key delete" onclick="deleteDigit()">‚Üê</button>
                <button class="key" onclick="addDigit('0')">0</button>
                <button class="key accept" onclick="acceptNumber()">‚úì</button>
            </div>
            
            <!-- Controles -->
            <div id="controls">
                <button class="btn-control" onclick="showBingoAlert()">üèÜ BINGO</button>
                <button class="btn-control reset" onclick="showResetConfirm()">üîÑ REINICIAR</button>
                <button class="btn-control menu" onclick="showMenuConfirm()">üè† MEN√ö</button>
            </div>
        </div>

        <!-- Panel Derecho (75%) -->
        <div id="rightPanel">
            <div id="board"></div>
        </div>
    </div>

    <!-- Modal personalizado -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h2 id="modalTitle"></h2>
            <p id="modalMessage"></p>
            <div id="modalButtons" class="modal-buttons"></div>
        </div>
    </div>

    <!-- Modal de Giro -->
    <div id="spinModal" class="spin-modal">
        <div class="spin-sphere">
            <div id="spinningNumber" class="spin-number">-</div>
        </div>
        <button id="spinAcceptBtn" class="spin-accept-btn" style="display: none;" onclick="acceptSpinNumber()">ACEPTAR</button>
    </div>

    <script>
        let currentInput = '';
        let maxNumbers = 0;
        let selectedNumbers = new Set();
        let gameMode = '';
        let currentSpinNumber = null;
        let availableNumbers = [];

        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(type) {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            switch(type) {
                case 'click':
                    oscillator.frequency.value = 800;
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.1);
                    break;
                case 'accept':
                    oscillator.frequency.value = 1000;
                    gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.2);
                    break;
                case 'spin':
                    oscillator.frequency.value = 400;
                    oscillator.type = 'sine';
                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.3);
                    break;
                case 'spinning':
                    oscillator.frequency.value = 200 + Math.random() * 400;
                    oscillator.type = 'square';
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.05);
                    break;
            }
        }

        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON') {
                playSound('click');
            }
        });

        function showModal(title, message, buttons) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalButtons = document.getElementById('modalButtons');

            modalTitle.textContent = title;
            modalMessage.textContent = message;
            modalButtons.innerHTML = '';

            buttons.forEach(btn => {
                const button = document.createElement('button');
                button.className = `modal-btn ${btn.class}`;
                button.textContent = btn.text;
                button.onclick = btn.action;
                modalButtons.appendChild(button);
            });

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function showNumberSelection() {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalButtons = document.getElementById('modalButtons');

            modalTitle.textContent = 'SELECCI√ìN DE BINGO';
            modalMessage.textContent = 'Seleccione la cantidad de n√∫meros para jugar:';
            modalButtons.innerHTML = '';
            
            const options = [30, 75, 80, 90, 100];
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'number-options';
            
            options.forEach(num => {
                const btn = document.createElement('button');
                btn.className = 'number-option';
                btn.textContent = num;
                btn.onclick = () => showModeSelection(num);
                optionsDiv.appendChild(btn);
            });
            
            modalButtons.appendChild(optionsDiv);
            modal.style.display = 'flex';
        }

        function showModeSelection(numbers) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalMessage = document.getElementById('modalMessage');
            const modalButtons = document.getElementById('modalButtons');

            modalTitle.textContent = 'MODO DE JUEGO';
            modalMessage.textContent = 'Seleccione el modo de juego:';
            modalButtons.innerHTML = '';
            
            const modeDiv = document.createElement('div');
            modeDiv.className = 'mode-selection';
            
            const digitalBtn = document.createElement('button');
            digitalBtn.className = 'mode-btn';
            digitalBtn.textContent = 'üì± BINGO TABLERO DIGITAL';
            digitalBtn.onclick = () => startGame(numbers, 'digital');
            
            const traditionalBtn = document.createElement('button');
            traditionalBtn.className = 'mode-btn';
            traditionalBtn.textContent = 'üé± BINGO JUEGO TRADICIONAL';
            traditionalBtn.onclick = () => startGame(numbers, 'traditional');
            
            modeDiv.appendChild(digitalBtn);
            modeDiv.appendChild(traditionalBtn);
            modalButtons.appendChild(modeDiv);
            modal.style.display = 'flex';
        }

        function startGame(numbers, mode) {
            maxNumbers = numbers;
            gameMode = mode;
            closeModal();
            
            availableNumbers = [];
            for (let i = 1; i <= maxNumbers; i++) {
                availableNumbers.push(i);
            }
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('mainScreen').style.display = 'flex';
            
            if (mode === 'digital') {
                document.getElementById('keyboard').style.display = 'grid';
                document.getElementById('spinButton').style.display = 'none';
                document.getElementById('currentNumber').style.flex = '0 0 40%';
            } else {
                document.getElementById('keyboard').style.display = 'none';
                document.getElementById('spinButton').style.display = 'flex';
                document.getElementById('currentNumber').style.flex = '0 0 20%';
            }
            
            createBoard();
        }

        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            selectedNumbers.clear();

            const cols = maxNumbers <= 30 ? 6 : maxNumbers <= 75 ? 10 : maxNumbers <= 90 ? 10 : 10;
            const rows = Math.ceil(maxNumbers / cols);
            
            board.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
            board.style.gridTemplateRows = `repeat(${rows}, 1fr)`;

            for (let i = 1; i <= maxNumbers; i++) {
                const cell = document.createElement('div');
                cell.className = 'number-cell';
                cell.textContent = i;
                cell.dataset.number = i;
                cell.onclick = () => toggleNumber(i);
                board.appendChild(cell);
            }
        }

        function addDigit(digit) {
            if (currentInput.length < 3) {
                currentInput += digit;
                document.getElementById('currentNumber').textContent = currentInput || '-';
            }
        }

        function deleteDigit() {
            currentInput = currentInput.slice(0, -1);
            document.getElementById('currentNumber').textContent = currentInput || '-';
        }

        function acceptNumber() {
            const number = parseInt(currentInput);
            
            if (!currentInput) {
                showModal('ERROR', 'Por favor ingrese un n√∫mero', [
                    { text: 'OK', class: 'confirm', action: closeModal }
                ]);
                return;
            }

            if (number < 1 || number > maxNumbers) {
                showModal('ERROR', `El n√∫mero debe estar entre 1 y ${maxNumbers}`, [
                    { text: 'OK', class: 'confirm', action: closeModal }
                ]);
                currentInput = '';
                document.getElementById('currentNumber').textContent = '-';
                return;
            }

            if (selectedNumbers.has(number)) {
                showModal('AVISO', `El n√∫mero ${number} ya fue seleccionado`, [
                    { text: 'OK', class: 'neutral', action: closeModal }
                ]);
                return;
            }

            playSound('accept');
            selectedNumbers.add(number);
            const cell = document.querySelector(`[data-number="${number}"]`);
            if (cell) {
                cell.classList.add('selected');
            }
            
            currentInput = '';
        }

        function spinNumber() {
            if (availableNumbers.length === 0) {
                showModal('AVISO', 'Ya se han sorteado todos los n√∫meros', [
                    { text: 'OK', class: 'neutral', action: closeModal }
                ]);
                return;
            }

            playSound('spin');
            
            const spinModal = document.getElementById('spinModal');
            const spinningNumber = document.getElementById('spinningNumber');
            const acceptBtn = document.getElementById('spinAcceptBtn');
            
            spinModal.style.display = 'flex';
            acceptBtn.style.display = 'none';
            spinningNumber.classList.add('spinning');
            
            let elapsed = 0;
            const duration = 8000;
            const interval = 100;
            
            const spinInterval = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * availableNumbers.length);
                spinningNumber.textContent = availableNumbers[randomIndex];
                playSound('spinning');
                elapsed += interval;
                
                if (elapsed >= duration) {
                    clearInterval(spinInterval);
                    
                    const finalIndex = Math.floor(Math.random() * availableNumbers.length);
                    currentSpinNumber = availableNumbers[finalIndex];
                    spinningNumber.textContent = currentSpinNumber;
                    spinningNumber.classList.remove('spinning');
                    
                    playSound('accept');
                    
                    acceptBtn.style.display = 'block';
                }
            }, interval);
        }

        function acceptSpinNumber() {
            if (currentSpinNumber === null) return;
            
            playSound('accept');
            
            selectedNumbers.add(currentSpinNumber);
            const cell = document.querySelector(`[data-number="${currentSpinNumber}"]`);
            if (cell) {
                cell.classList.add('selected');
            }
            
            document.getElementById('currentNumber').textContent = currentSpinNumber;
            
            const index = availableNumbers.indexOf(currentSpinNumber);
            if (index > -1) {
                availableNumbers.splice(index, 1);
            }
            
            document.getElementById('spinModal').style.display = 'none';
            currentSpinNumber = null;
        }

        function toggleNumber(number) {
            if (selectedNumbers.has(number)) {
                showModal('CONFIRMACI√ìN', `¬øDesea eliminar el n√∫mero ${number}?`, [
                    { text: 'S√ç', class: 'confirm', action: () => {
                        selectedNumbers.delete(number);
                        const cell = document.querySelector(`[data-number="${number}"]`);
                        if (cell) {
                            cell.classList.remove('selected');
                        }
                        
                        if (gameMode === 'traditional' && !availableNumbers.includes(number)) {
                            availableNumbers.push(number);
                            availableNumbers.sort((a, b) => a - b);
                        }
                        
                        closeModal();
                    }},
                    { text: 'NO', class: 'cancel', action: closeModal }
                ]);
            }
        }

        function showBingoAlert() {
            showModal('üéâ ¬°BINGO! üéâ', '¬°FELICITACIONES! ¬°Alguien ha ganado el BINGO!', [
                { text: 'REINICIAR', class: 'confirm', action: () => {
                    resetGame();
                    closeModal();
                }},
                { text: 'CANCELAR', class: 'cancel', action: closeModal }
            ]);
        }

        function showResetConfirm() {
            showModal('CONFIRMACI√ìN', '¬øEst√° seguro que desea reiniciar el juego?', [
                { text: 'S√ç', class: 'confirm', action: () => {
                    resetGame();
                    closeModal();
                }},
                { text: 'NO', class: 'cancel', action: closeModal }
            ]);
        }

        function showMenuConfirm() {
            showModal('CONFIRMACI√ìN', '¬øDesea regresar al men√∫ principal?', [
                { text: 'S√ç', class: 'confirm', action: () => {
                    closeModal();
                    document.getElementById('mainScreen').style.display = 'none';
                    document.getElementById('welcomeScreen').style.display = 'flex';
                    currentInput = '';
                    document.getElementById('currentNumber').textContent = '-';
                }},
                { text: 'NO', class: 'cancel', action: closeModal }
            ]);
        }

        function resetGame() {
            selectedNumbers.clear();
            currentInput = '';
            document.getElementById('currentNumber').textContent = '-';
            const cells = document.querySelectorAll('.number-cell');
            cells.forEach(cell => cell.classList.remove('selected'));
            
            if (gameMode === 'traditional') {
                availableNumbers = [];
                for (let i = 1; i <= maxNumbers; i++) {
                    availableNumbers.push(i);
                }
            }
        }

        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });

        document.addEventListener('gesturechange', function(e) {
            e.preventDefault();
        });

        document.addEventListener('gestureend', function(e) {
            e.preventDefault();
        });

        if (window.screen && window.screen.orientation) {
            window.screen.orientation.lock('landscape').catch(() => {});
        }
    </script>
</body>
</html>
